new entry "Interrupt_AttackOfOpportunity"
type "InterruptData"
data "DisplayName" "h185e568bg0bccg4f2ega9c1g69239d2aff17;1"
data "Description" "h4ec5ac65g324cg4065g86a8g7837c21272d8;1"
data "Icon" "PassiveFeature_AttackOfOpportunity"
data "InterruptContext" "OnLeaveAttackRange"
data "InterruptContextScope" "Self"
data "Container" "YesNoDecision"
data "Conditions" "IsAbleToReact(context.Observer) and not Self(context.Observer, context.Target) and Enemy() and not HasStatus('SANCTUARY',context.Source) and not WieldingWeapon('Ammunition', false, false, context.Source) and not (not Player(context.Source) and Tagged('AI_IGNORED_TARGET')  and not HasStatus('GNOLL_SUDDENRUSH')) and not HasStatus('SHOCKWAVE') and not (HasStatus('GOADING_ATTACK_PANACHE', context.Source) and not HasStatus('GOADING_ATTACK_SOURCE_PANACHE', context.Target)) and not (HasStatus('MOBILE_NO_AOO', context.Source) and HasStatus('MOBILE_NO_AOO_SOURCE', context.Target)) and not HasStatus('FLAMING_SPHERE_AURA') and not HasStatus('SNEAKING',context.Target) and not HasStatus('SG_Ignore_AOO',context.Target)  and not AnyEntityIsItem() and not HasSpellFlag(SpellFlags.IgnoreAoO, context.Target)"
data "Properties" "IF(not HasPassive('Sentinel_ZeroSpeed',context.Source)):UseAttack();IF(HasPassive('Sentinel_ZeroSpeed',context.Source)):UseSpell(Target_Sentinel_AttackOfOpportunity,true,true,true);TutorialEvent(SWAP,f658a860-7e3e-44fd-807b-88d3c0c31217)"
data "Cost" "ReactionActionPoint:1"
data "InterruptDefaultValue" "Enabled"
data "EnableCondition" "not HasStatus('SG_Blinded')"
data "EnableContext" "OnStatusApplied;OnStatusRemoved"

new entry "Interrupt_Riposte"
type "InterruptData"
data "DisplayName" "h971bd2eag142bg4a39gbd0cg82575df420f0;1"
data "Description" "h75d5a90bg99b8g4ef1g9c7ag75e79729df99;1"
data "DescriptionParams" "LevelMapValue(EilistraeanSongDmg)"
data "TooltipDamageList" "DealDamage(MainMeleeWeapon + LevelMapValue(EilistraeanSongDmg), MainMeleeWeaponDamageType)"
data "Icon" "PassiveFeature_Riposte"
data "InterruptContext" "OnCastHit"
data "InterruptContextScope" "Self"
data "Container" "YesNoDecision"
data "Conditions" "IsAbleToReact(context.Observer) and Enemy(context.Source,context.Observer) and IsMeleeAttack() and IsMiss() and not HasStatus('INVISIBILITY') and not AnyEntityIsItem() and not DistanceToEntityGreaterThan(2, context.ObserverPosition, context.Source) and HasLastAttackTriggered()"
data "Properties" "UseSpell(SWAP,Target_EilistraeanRiposte,true,true,true);ApplyStatus(OBSERVER_OBSERVER,INTERRUPT_RIPOSTE,100,0)"
data "Cost" "ReactionActionPoint:1;"
data "InterruptDefaultValue" "Enabled"
data "EnableCondition" "not HasAnyStatus({'SG_Polymorph','SG_Blinded'}) or HasAnyStatus({'SG_Disguise','WILDSHAPE_STARRY_ARCHER_PLAYER','WILDSHAPE_STARRY_CHALICE_PLAYER','WILDSHAPE_STARRY_DRAGON_PLAYER'});"
data "EnableContext" "OnStatusApplied;OnStatusRemoved"

new entry "Interrupt_EilistraeanCounter"
type "InterruptData"
data "DisplayName" "hd8c13b92gcdabg48faga6b5g6573b7106832;1"
data "Description" "h9c3b8dadg3600g4865gaed0g1b3fd0d4be8e;1"
data "DescriptionParams" "LevelMapValue(EilistraeanSongProg)"
data "ExtraDescription" "h59afe09dg6994g45a9g8aa9gac4f62379339;1"
data "ExtraDescriptionParams" "LevelMapValue(EilistraeanSongProg);10"
data "Icon" "PassiveFeature_Counterspell"
data "InterruptContext" "OnSpellCast"
data "InterruptContextScope" "Nearby"
data "Container" "YesNoDecision"
data "Conditions" "not HasSpellCastBlocked(context.Observer) and IsAbleToReact(context.Observer) and not Self(context.Source, context.Observer) and Enemy(context.Source, context.Observer) and IsSpell() and not Uninterruptible() and not HasStringInSpellRoll('WeaponAttack') and not AnyEntityIsItem() and not SpellId('Shout_END_Gale_ActivateNethereseOrb') and CounterspellCheck(context.Observer, context.Source)"
data "Roll" "TryEilistraeanCounterspellHigherLevel(LevelMapValue(EilistraeanSongProg))"
data "Success" "Counterspell();UseSpell(OBSERVER_SOURCE,Target_EilistraeanCounter_Success,true,true,true)"
data "Failure" "UseSpell(OBSERVER_SOURCE,Target_EilistraeanCounter_Failure,true,true,true)"
data "Cost" "ReactionActionPoint:1;"
data "InterruptDefaultValue" "Enabled"
data "EnableCondition" "not HasStatus('SG_Polymorph') or HasAnyStatus({'SG_Disguise','WILDSHAPE_STARRY_ARCHER_PLAYER','WILDSHAPE_STARRY_CHALICE_PLAYER','WILDSHAPE_STARRY_DRAGON_PLAYER'});"
data "EnableContext" "OnStatusApplied;OnStatusRemoved"

new entry "Interrupt_EilistraeanParry"
type "InterruptData"
data "DisplayName" "h869334e3gca97g4926g9804g34b7b1dca095;1"
data "Description" "h82c20330g94f4g4da8gaf92g53e2a94013df;1"
data "DescriptionParams" "LevelMapValue(EilistraeanSongDmg)"
data "Icon" "PassiveFeature_Parry"
data "InterruptContext" "OnPreDamage"
data "InterruptContextScope" "Self"
data "Container" "YesNoDecision"
data "Conditions" "IsAbleToReact(context.Observer) and Self(context.Target,context.Observer) and (IsMeleeAttack() or IsRangedWeaponAttack() or MagicMissileSpellCheck()) and not HasStatus('SG_Polymorph_BeastShape') and not AnyEntityIsItem()"
data "Properties" "AdjustRoll(OBSERVER_OBSERVER,-(LevelMapValue(EilistraeanSongDmg)+DexterityModifier));ApplyStatus(OBSERVER_TARGET,INTERRUPT_DEFLECT_MISSILES_HIT,100,1);"
data "Cost" "ReactionActionPoint:1;"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasStatus('SG_Polymorph') or HasAnyStatus({'SG_Disguise','WILDSHAPE_STARRY_ARCHER_PLAYER','WILDSHAPE_STARRY_CHALICE_PLAYER','WILDSHAPE_STARRY_DRAGON_PLAYER'});"
data "EnableContext" "OnStatusApplied;OnStatusRemoved"
